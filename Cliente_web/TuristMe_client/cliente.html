
<!DOCTYPE html>
<html lang="es">  
  <head>
    <title>CLIENTE TURISTME</title> 
    <meta charset="UTF-8">
    <meta name="title" content="TuristMe Client">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="Main.css" rel="stylesheet"/>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />   
  </head>  

  <body>    
      <header>
        <h1 id="error"></h1>
        <h1 id="succes"></h1>
      </header> 
   <div>
        <fieldset>
          <legend>Login Client</legend>
          <label>Email</label><input id="email" type="text" name="email" size="30" maxlength="100" />
          <label>Password</label><input id="password" type="password" name="password" size="30" maxlength="100"/>
        <br>
          <input class ="button" onclick="log()" type="submit" value="Login">
        </fieldset>
          <br>
        <!--   <div>
            <label>Email</label><input id="email_reg" type="text" name="email" size="30" maxlength="100" />
          <label>Name</label><input id="name" type="text" name="name" size="30" maxlength="100"/>
          <label>Password</label><input id="password_reg" type="password" name="password" size="30" maxlength="100"/>

          <input class ="button" onclick="regis()" type="submit" value="register"></div>
   </div> -->
   <br>
  <footer>
    <br>
    <br>
  </footer>
</body>  

<script type="text/javascript">


  function log(){

    $.ajax({
      method: "POST",
      url: "http://localhost:8888/TuristMe/public/index.php/api/login",
      data: {
       email: document.getElementById("email").value, 
      password: document.getElementById("password").value
      },

      success:function(data)
      {
        var Authorization = localStorage.setItem('Authorization',data);
        console.log(data);
        console.log("Login success");
        window.location= "http://localhost:8888//TuristMe/Cliente_web/TuristMe_client/register.html";
      },
      error:function(response){
        console.log(response.responseJSON.message);
        $('#error').text(response.responseJSON.message);
        
      }
    })
    
  }

   // function regis(){

   //   $.ajax({
   //     method: "POST",
   //     url: "http://localhost:8888/TuristMe/public/index.php/api/users",
   //     data: {
   //     email: document.getElementById("email_reg").value, 
   //     password: document.getElementById("password_reg").value,
   //     name: document.getElementById("name").value,
   //    },

   //    success:function(data)
   //     {
   //       var Authorization = localStorage.setItem('Authorization',data);
   //       console.log(data);
   //       console.log("llegando aqui");
   //       window.location= "http://localhost:8888/TuristMe/Cliente_web/TuristMe_client/Correcto.html";
   //     },
   //     error:function(msg){
   //       console.log(msg.responseText);
   //       var response = jQuery.parseJSON(msg.responseText);
   //       $('<div/>').html(response.message).appendTo('#caja');
   //     }
   //   })
    
   // }
</script>


</html>